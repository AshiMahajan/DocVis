{% extends "base.html" %} {% block title %}Document{% endblock %} {% block
content %} {% if error %}
<section class="card">
  <p class="error">{{ error }}</p>
</section>
{% elif doc %}
<section class="card">
  <h2>{{ doc.filename }}</h2>
  <p class="meta">Chunks: {{ doc.meta.num_chunks }}</p>

  <!-- CSS-only tabs using radio buttons -->
  <div class="tabs-wrapper">
    <!-- radios (hidden) -->
    <input type="radio" name="tab" id="tab-extract" checked />
    <input type="radio" name="tab" id="tab-summary" />
    <input type="radio" name="tab" id="tab-qa" />

    <!-- labels as tab buttons -->
    <div class="tabs">
      <label class="tab-label" for="tab-extract">Extracted Text</label>
      <label class="tab-label" for="tab-summary">Summary</label>
      <label class="tab-label" for="tab-qa">Q&amp;A</label>
    </div>

    <!-- panels -->
    <div class="tab-panels">
      <div class="tab-panel" id="panel-extract">
        <h3>Extracted Text</h3>
        <pre class="summary">{{ doc.meta.full_text }}</pre>
      </div>

      <div class="tab-panel" id="panel-summary">
        <h3>Summary</h3>
        <pre class="summary">{{ doc.summary }}</pre>
      </div>

      <div class="tab-panel" id="panel-qa">
        <h3>Ask questions about this document</h3>
        <form method="post" class="qa-form">
          <textarea
            name="question"
            rows="3"
            placeholder="Type your question..."
            required
          ></textarea>
          <button type="submit">Ask</button>
        </form>

        <div class="qa-results">
          {% if answer %}
          <h4>Answer</h4>
          <p>{{ answer }}</p>
          {% if references %}
          <h5>References</h5>
          <ul>
            {% for ref in references %}
            <li>{{ ref }}</li>
            {% endfor %}
          </ul>
          {% endif %} {% else %}
          <p class="hint">Ask a question to see the answer here.</p>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</section>
{% else %}
<section class="card">
  <p>Document not found.</p>
</section>
{% endif %} {% endblock %}
